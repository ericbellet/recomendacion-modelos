head(periodico[,c(1,5,6,7)])
ejemplo <- read.csv("data/ejemplo.csv")
periodico <- read.csv("data/periodico.csv")
```
# Primera parte
Modiﬁcar su dataset de tal manera que no se lean los identiﬁcadores de los artículos como itemN sino por su tipo de contenido contenido/articuloN. Ejemplo: {item1, item10, item81} es la transacción {deportes/articulo1, politica/articulo1, opinion/articulo9}.
Para modificar el dataset dada estas condiciones se realizó lo siguiente:
* Se cambio el nombre la columna 5 y se creó la columna *articles* y se llenó con vectores númericos que representan los items que observó el usuario.
```{r}
#Cambio el nombre de la columna para que tenga coherencia con el ejemplo dado.
colnames(periodico)[5] <- "items"
#Creo la columna de los articulos
periodico$articles <- periodico$items
#Se sabe que el portal ofrece 9 tipos de contenidos
#y nos ofrecen solo información de 9 artículos.
#Obtengo el numero de los articulos.
periodico$articles <- strsplit(gsub("[{}item]","",periodico$articles), ",")
```
* Dado los vectores de cada fila de la columna *articles* se modificó para que tuviera el formato *contenido/articuloN* utilizando la función genArticles.
```{r}
genArticles <- function(articles){
# Genera la columna articles utilizando los items.
#
# Args:
#   articles: Son arreglos númericos que representan los items (EJ: {item1,item9,item63} -> 1,9,63)
#
# Returns:
#   Retorna la columna articles.
articulo <- ""
for (i in 1:length(articles)) {
if (as.integer(articles[i]) <= 9 & as.integer(articles[i]) >= 1){
articulo <- paste(articulo, gsub(" ","",paste("deportes/articulo",articles[i])))
}
if (as.integer(articles[i]) <= 18 & as.integer(articles[i]) >= 10){
articulo <- paste(articulo, gsub(" ","",paste("politica/articulo",(as.integer(articles[i])-9))))
}
if (as.integer(articles[i]) <= 27 & as.integer(articles[i]) >= 19){
articulo <- paste(articulo, gsub(" ","",paste("variedades/articulo",(as.integer(articles[i])-18))))
}
if (as.integer(articles[i]) <= 36 & as.integer(articles[i]) >= 28){
articulo <- paste(articulo, gsub(" ","",paste("internacional/articulo",(as.integer(articles[i])-27))))
}
if (as.integer(articles[i]) <= 45 & as.integer(articles[i]) >= 37){
articulo <- paste(articulo, gsub(" ","",paste("nacionales/articulo",(as.integer(articles[i])-36))))
}
if (as.integer(articles[i]) <= 54 & as.integer(articles[i]) >= 46){
articulo <- paste(articulo, gsub(" ","",paste("sucesos/articulo",(as.integer(articles[i])-45))))
}
if (as.integer(articles[i]) <= 63 & as.integer(articles[i]) >= 55){
articulo <- paste(articulo, gsub(" ","",paste("comunidad/articulo",(as.integer(articles[i])-54))))
}
if (as.integer(articles[i]) <= 72 & as.integer(articles[i]) >= 64){
articulo <- paste(articulo, gsub(" ","",paste("negocios/articulo",(as.integer(articles[i])-63))))
}
if (as.integer(articles[i]) <= 81 & as.integer(articles[i]) >= 73){
articulo <- paste(articulo, gsub(" ","",paste("opinion/articulo",(as.integer(articles[i])-72))))
}
}
return(articulo)
}
#Modifico el dataset con las condiciones dadas.
periodico$articles <- lapply(periodico$articles, genArticles)
```
* Finalmente se realizan modificaciones en la columna articles para que tengan el formato adecuado y se calcula el tiempo total que estuvó un usuario observando los artículos.
```{r}
#Convierto los espacios en ,
periodico$articles <- gsub(" ",",",periodico$articles)
#Elimino la primer valor del string.
periodico$articles <- substring(periodico$articles, 2)
#Calculo el tiempo totan el segundos que dura el usuario en la pagina.
periodico$tiempototal <- difftime(periodico$exit, periodico$entry, units =  "secs")
head(periodico[,c(1,5,6,7)])
###############CAMBIAR##########################
setwd("C:/Users/Eric/Desktop/recomendacion-modelos/")
################################################
install = function(pkg)
{
# Si ya está instalado, no lo instala.
if (!require(pkg, character.only = TRUE)) {
install.packages(pkg)
if (!require(pkg, character.only = TRUE)) stop(paste("load failure:", pkg))
}
}
#Instalo automaticamente los paquetes.
install('arules')
install('arulesViz')
#Cargo las librerias.
library(arules)
library(arulesViz)
##-------------------------------LECTURA -----------------------------------
ejemplo <- read.csv("data/ejemplo.csv")
periodico <- read.csv("data/periodico.csv")
```
# Primera parte
Modiﬁcar su dataset de tal manera que no se lean los identiﬁcadores de los artículos como itemN sino por su tipo de contenido contenido/articuloN. Ejemplo: {item1, item10, item81} es la transacción {deportes/articulo1, politica/articulo1, opinion/articulo9}.
Para modificar el dataset dada estas condiciones se realizó lo siguiente:
* Se cambio el nombre la columna 5 y se creó la columna *articles* y se llenó con vectores númericos que representan los items que observó el usuario.
```{r}
#Cambio el nombre de la columna para que tenga coherencia con el ejemplo dado.
colnames(periodico)[5] <- "items"
#Creo la columna de los articulos
periodico$articles <- periodico$items
#Se sabe que el portal ofrece 9 tipos de contenidos
#y nos ofrecen solo información de 9 artículos.
#Obtengo el numero de los articulos.
periodico$articles <- strsplit(gsub("[{}item]","",periodico$articles), ",")
```
* Dado los vectores de cada fila de la columna *articles* se modificó para que tuviera el formato *contenido/articuloN* utilizando la función genArticles.
```{r}
genArticles <- function(articles){
# Genera la columna articles utilizando los items.
#
# Args:
#   articles: Son arreglos númericos que representan los items (EJ: {item1,item9,item63} -> 1,9,63)
#
# Returns:
#   Retorna la columna articles.
articulo <- ""
for (i in 1:length(articles)) {
if (as.integer(articles[i]) <= 9 & as.integer(articles[i]) >= 1){
articulo <- paste(articulo, gsub(" ","",paste("deportes/articulo",articles[i])))
}
if (as.integer(articles[i]) <= 18 & as.integer(articles[i]) >= 10){
articulo <- paste(articulo, gsub(" ","",paste("politica/articulo",(as.integer(articles[i])-9))))
}
if (as.integer(articles[i]) <= 27 & as.integer(articles[i]) >= 19){
articulo <- paste(articulo, gsub(" ","",paste("variedades/articulo",(as.integer(articles[i])-18))))
}
if (as.integer(articles[i]) <= 36 & as.integer(articles[i]) >= 28){
articulo <- paste(articulo, gsub(" ","",paste("internacional/articulo",(as.integer(articles[i])-27))))
}
if (as.integer(articles[i]) <= 45 & as.integer(articles[i]) >= 37){
articulo <- paste(articulo, gsub(" ","",paste("nacionales/articulo",(as.integer(articles[i])-36))))
}
if (as.integer(articles[i]) <= 54 & as.integer(articles[i]) >= 46){
articulo <- paste(articulo, gsub(" ","",paste("sucesos/articulo",(as.integer(articles[i])-45))))
}
if (as.integer(articles[i]) <= 63 & as.integer(articles[i]) >= 55){
articulo <- paste(articulo, gsub(" ","",paste("comunidad/articulo",(as.integer(articles[i])-54))))
}
if (as.integer(articles[i]) <= 72 & as.integer(articles[i]) >= 64){
articulo <- paste(articulo, gsub(" ","",paste("negocios/articulo",(as.integer(articles[i])-63))))
}
if (as.integer(articles[i]) <= 81 & as.integer(articles[i]) >= 73){
articulo <- paste(articulo, gsub(" ","",paste("opinion/articulo",(as.integer(articles[i])-72))))
}
}
return(articulo)
}
#Modifico el dataset con las condiciones dadas.
periodico$articles <- lapply(periodico$articles, genArticles)
```
* Finalmente se realizan modificaciones en la columna articles para que tengan el formato adecuado y se calcula el tiempo total que estuvó un usuario observando los artículos.
```{r}
#Convierto los espacios en ,
periodico$articles <- gsub(" ",",",periodico$articles)
#Elimino la primer valor del string.
periodico$articles <- substring(periodico$articles, 2)
#Calculo el tiempo totan el segundos que dura el usuario en la pagina.
periodico$tiempototal <- difftime(periodico$exit, periodico$entry, units =  "secs")
head(periodico[,c(1,5,6,7)])
```
# Segunda parte
Conocer los tipos de usuarios que ingresan a su página (ellos creen que son 8 tipos de usuarios) y tratar de determinar la proporción de cada tipo de usuario.
# Tercera parte
print(paste("El artículo que se recomienda es:", articuloARecomendar))
